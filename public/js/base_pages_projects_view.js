/*
 *  Document   : base_pages_projects_view.js
 *  Author     : pixelcave
 */
var BasePagesProjectsView=function(){var t,a,s,e,r,n,d,l,o,c,i,k=function(){a=jQuery(".js-tasks"),s=jQuery("#js-task-form"),e=jQuery("#js-task-input"),n=jQuery(".js-task-list"),d=jQuery(".js-task-list-starred"),l=jQuery(".js-task-list-completed"),o=jQuery(".js-task-badge"),c=jQuery(".js-task-badge-starred"),i=jQuery(".js-task-badge-completed"),t=9,u(),s.on("submit",function(t){t.preventDefault(),r=e.prop("value"),r&&(j(r),e.prop("value","").focus())});var k,h;a.on("click",".js-task-status",function(t){t.preventDefault(),k=jQuery(this).closest(".js-task"),h=k.attr("data-task-id"),"true"===k.attr("data-task-completed")?g(h):y(h)});var Q,v;a.on("click",".js-task-star",function(){Q=jQuery(this).closest(".js-task"),v=Q.attr("data-task-id"),"true"===Q.attr("data-task-starred")?b(v):f(v)}),a.on("click",".js-task-remove",function(){Q=jQuery(this).closest(".js-task"),v=Q.attr("data-task-id"),p(v)})},u=function(){o.text(n.children().length||""),c.text(d.children().length||""),i.text(l.children().length||"")},j=function(a){n.prepend('<div class="js-task block block-rounded push-5 animated fadeIn" data-task-id="'+t+'" data-task-completed="false" data-task-starred="false"><table class="block-table table-vcenter"><tr><td class="text-center" style="width: 50px;"><label class="js-task-status css-input css-checkbox css-checkbox-primary css-checkbox-rounded"><input type="checkbox"><span></span></label></td><td class="js-task-content font-w600">'+jQuery("<span />").text(a).html()+'</td><td style="width: 100px;"><button class="js-task-star btn btn-link text-warning" type="button"><i class="fa fa-star-o"></i></button> <button class="js-task-remove btn btn-link text-danger" type="button"><i class="fa fa-times"></i></button></td></tr></table></div>'),u(),t++},p=function(t){jQuery('.js-task[data-task-id="'+t+'"]').remove(),u()},f=function(t){var a=jQuery('.js-task[data-task-id="'+t+'"]');a.length>0&&(a.attr("data-task-starred",!0),a.find(".js-task-star > i").toggleClass("fa-star fa-star-o"),"false"===a.attr("data-task-completed")&&a.prependTo(d),u())},b=function(t){var a=jQuery('.js-task[data-task-id="'+t+'"]');a.length>0&&(a.attr("data-task-starred",!1),a.find(".js-task-star > i").toggleClass("fa-star fa-star-o"),"false"===a.attr("data-task-completed")&&a.prependTo(n),u())},g=function(t){var a=jQuery('.js-task[data-task-id="'+t+'"]');a.length>0&&(a.attr("data-task-completed",!1),a.find(".block-table").toggleClass("bg-gray-lighter"),a.find(".js-task-status > input").prop("checked",!1),a.find(".js-task-content > del").contents().unwrap(),"true"===a.attr("data-task-starred")?a.prependTo(d):a.prependTo(n),u())},y=function(t){var a=jQuery('.js-task[data-task-id="'+t+'"]');a.length>0&&(a.attr("data-task-completed",!0),a.find(".block-table").toggleClass("bg-gray-lighter"),a.find(".js-task-status > input").prop("checked",!0),a.find(".js-task-content").wrapInner("<del></del>"),a.prependTo(l),u())};return{init:function(){k()}}}();jQuery(function(){BasePagesProjectsView.init()});
